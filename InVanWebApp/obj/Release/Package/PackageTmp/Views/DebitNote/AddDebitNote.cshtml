@model InVanWebApp_BO.DebitNoteBO
@{
    ViewBag.Title = "AddDebitNote";
    Layout = "~/Views/Shared/MainMaster.cshtml";
}


@using (Html.BeginForm("", "", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    <div class="card">
        <div class="card-body">
            <h4>Add Debit / Rejection Note Note</h4>
            <hr />
            @Html.ValidationSummary(true)
            <div class="row">
                <div class="col-md-2">
                    <label>Note Type <span style="color:red">*</span> </label>
                </div>
                <div class="col-md-4">
                    <select class="form-control" id="NoteType" name="NoteType">
                        <option value="DebitNote">Debit Note</option>
                        <option value="RejectionNote">Rejection Note</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <label id="lblNoteDate">Debit Note Date</label>
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(model => model.NoteDate, "{0:yyyy-MM-dd}", new { @class = "form-control form-control-sm", type = "date" })
                    @Html.ValidationMessageFor(model => model.NoteDate, "", new { @class = "error mt-2 text-danger" })
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-2">
                    Inward No.
                </div>
                <div class="col-md-4">
                    @Html.DropDownList("InwardNumber", new SelectList((System.Collections.IEnumerable)ViewData["InwardNoteNumbers"], "Value", "Text"), "-- Select Purchase Number -- ", new { @class = "form-control select2" })
                </div>
            </div>
            <br />
            <!--<div class="row">
                <div class="col-md-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title" style="color:darkcyan">Delivery Details</h4>
                            <hr />
                            <div class="form-group">
                                <textarea class="form-control" style="height:100px;"></textarea>-->
                                @*@Html.TextAreaFor(model => model.DeliveryAddress, new { id = "DeliveryAddress", @class = "form-control", placeholder = "Delivery address", style = "height:100px" })
                                    @Html.ValidationMessageFor(model => model.DeliveryAddress, "", new { @class = "error mt-2 text-danger" })*@
                            <!--</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title" style="color:darkcyan">Supplier Details</h4>
                            <hr />
                            <div class="form-group">
                                <textarea class="form-control" style="height:100px;"></textarea>-->
                                @*@Html.TextAreaFor(model => model.SupplierAddress, new { id = "SupplierAddress", @class = "form-control", placeholder = "Supplier address", style = "height:100px" })
                                    @Html.ValidationMessageFor(model => model.SupplierAddress, "", new { @class = "error mt-2 text-danger" })*@

                            <!--</div>
                        </div>
                    </div>
                </div>
                <br />
                <br />
            </div>-->
            <br />
            <div class="row">
                <div class="col-md-12 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">ITEM DETAILS</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-sorter-wrapper col-lg-12 table-responsive">
                                <table class="table table-striped" id="submissionTable">
                                    <thead>
                                        <tr>
                                            <th class="sortStyle">
                                                Sr. No
                                                <i class="fa fa-angle-down"></i>
                                            </th>
                                            <th class="sortStyle">
                                                Item Name <br /> [Code]
                                                <i class="fa fa-angle-down"></i>
                                            </th>
                                            <th class="sortStyle">
                                                Inward<br /> Quantity
                                                <i class="fa fa-angle-down"></i>
                                            </th>
                                            <th class="sortStyle">
                                                Debit<br /> Quantity
                                                <i class="fa fa-angle-down"></i>
                                            </th>
                                            <th class="sortStyle">
                                                Units
                                                <i class="fa fa-angle-down"></i>
                                            </th>
                                            <th class="sortStyle">
                                                Unit<br /> Price
                                                <i class="fa fa-angle-down"></i>
                                            </th>
                                            <th class="sortStyle">
                                                Total<br /> Payable
                                                <i class="fa fa-angle-down"></i>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr id="tablerow">
                                            <td>
                                                <input class="form-control" />
                                            </td>
                                            <td>
                                                <input class="form-control" />
                                            </td>
                                            <td>
                                                <input class="form-control" />
                                            </td>
                                            <td>
                                                <input class="form-control" />
                                            </td>
                                            <td>
                                                <input class="form-control" />
                                            </td>
                                            <td>
                                                <input class="form-control" />
                                            </td>
                                            <td>
                                                <input class="form-control" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <hr />
            <br />
            <div class="col-md-12 grid-margin stretch-card">
                <div class="col-md-6 grid-margin stretch-card">
                    <div class="card h-75">
                        <div class="card-body">
                            <h4 class="card-title" style="color:darkcyan">Attach Signature</h4>
                            <hr />
                            <div class="form-group">
                                <input type="file" id="file" name="Signature"
                                       onchange="return fileValidation()" />

                                <!-- Image preview -->
                                <span style="color:green">@ViewBag.Message</span>
                                <br />
                                <br />
                                <center>
                                    <div id="imagePreview"></div>
                                </center>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <br />
                <div class="col-md-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <hr />
                            <div class="form-group">
                                <div class="row">
                                    <label>Total (before tax): </label>
                                    <input class="form-control" id="TotalBeforeTax" name="TotalItemCost" />
                                </div>
                                <div class="row">
                                    <label>Total tax: </label>
                                    @*<input class="form-control" id="TotalTax" name="Tax" />*@
                                    <input class="form-control" id="TotalTax" name="TotalTax" />
                                </div>
                                <div class="row">
                                    <label>Total (after tax):</label>
                                    @*<input class="form-control" id="TotalAfterTax" />*@
                                    <input class="form-control" id="TotalAfterTax" name="TotalAfterTax" />
                                </div>
                                <div class="row">
                                    <label><b>Grand Total:</b></label>
                                    <input class="form-control" id="GrandTotal" name="GrandTotal" />
                                </div>
                            </div>
                            <br />
                            <button type="submit" class="btn btn-sm btn-primary mr-2" style="background: linear-gradient(85deg, #392c70, #6a005b);" formaction="AddPurchaseOrder">Save</button>
                            @Html.ActionLink("Back to List", "Index")
                        </div>
                    </div>
                </div>
                <br />
                <br />
            </div>
        </div>
    </div>
}

<script>
    $('#NoteType').change(function () {
        var noteType = $('#NoteType option:selected').attr('value');
        if (noteType == 'DebitNote') {
            $("#lblNoteDate").empty();
            $("#lblNoteDate").append("Debit Note Date");
        }
        else {
            $("#lblNoteDate").empty();
            $("#lblNoteDate").append("Rejection Note Date");
        }
    });


    $('[id*=InwardNumber]').change(function () {
        var InwardNumber = $(this).find('option:selected').val();
        
        if (InwardNumber != null && InwardNumber != '') {
        //    $.getJSON('Home/GetEmployees', { country: selectedCountry }, function (response) {
        //        if (response.length > 0) {
        //            $("[id*=tblEmployees] tbody").empty();
        //            var row;
        //            $.each(response, function (index, item) {
        //                row += "<tr><td>" + item.Id + "</td><td>" + item.Name + "</td></tr>"
        //            })
        //            $("[id*=tblEmployees] tbody").append(row);
        //        }
        //    });
        }
    });

</script>