@model InVanWebApp_BO.PurchaseOrderBO
@{
    ViewBag.Title = "EditPurchaseOrder";
    Layout = "~/Views/Shared/MainMaster.cshtml";
}
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="card">
        <div class="card-body">
            <h4>Edit Purchase Order</h4>
            <hr />
            @Html.ValidationSummary(true)
            @Html.HiddenFor(model => model.PurchaseOrderId)

            <div class="row">
                <div class="col-md-2">
                    @Html.Label("Tittle")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(model => model.Tittle, new { @class = "form-control form-control-sm", placeholder = "Purchase Order For Vangi Foods", type = "text" })
                    @Html.ValidationMessageFor(model => model.Tittle, "", new { @class = "error mt-2 text-danger" })
                </div>
                <br />
                <div class="col-md-2">
                    @Html.Label("PO Number")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(model => model.PONumber, new { @class = "form-control", @readonly = "readonly" })
                    @Html.ValidationMessageFor(model => model.PONumber, "", new { @class = "error mt-2 text-danger" })
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-2">
                    @Html.Label("PO Document Date")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4 form-group">
                    @Html.TextBoxFor(model => model.PODate, "{0:yyyy-MM-dd}", new { @class = "form-control", type = "date" })                                                           
                    @Html.ValidationMessageFor(model => model.PODate, "", new { @class = "error mt-2 text-danger" })
                </div>
                <div class="col-md-2">
                    @Html.Label("Delivery Date")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4 form-group">
                    @Html.TextBoxFor(model => model.DeliveryDate, "{0:yyyy-MM-dd}", new { @class = "form-control", type = "date" })
                    @Html.ValidationMessageFor(model => model.DeliveryDate, "", new { @class = "error mt-2 text-danger" })
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-2">
                    @Html.Label("Terms And Condition")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.DropDownList("TermsAndConditionID", (IEnumerable<SelectListItem>)ViewData["TermsAndConditionID"], "---Select---", new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.TermsAndConditionID, "", new { @class = "error mt-2 text-danger" })

                </div>
            </div>
            <br />
            @*<div class="row">
            <div class="col-md-2">
                @Html.Label("Purchase Order Status")
                <span style="color:red">*</span>
            </div>
            <div class="col-md-4">
                @Html.TextBoxFor(model => model.PurchaseOrderStatus, new { @class = "form-control form-control-sm", placeholder = "Pending", type = "text" })
                @Html.ValidationMessageFor(model => model.PurchaseOrderStatus, "", new { @class = "error mt-2 text-danger" })
            </div>
        </div>*@
            <br />
            <div class="row">
                <div class="col-md-2">
                    @Html.Label("Location Name")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.DropDownListFor(model => model.LocationId, (IEnumerable<SelectListItem>)ViewData["LocationName"], "---Select---", new { @class = "form-control", onchange = "SelectedIndexChangedLocation($(this).val())" })
                    @*@Html.ValidationMessageFor(model => model.LocationId, "", new { @class = "error mt-2 text-danger" })*@
                </div>
                <br />
                <div class="col-md-2">
                    @Html.Label("Venders Name")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.DropDownListFor(model => model.VendorsID, (IEnumerable<SelectListItem>)ViewData["CompanyName"], "---Select---", new { @class = "form-control", onchange = "SelectedIndexChanged($(this).val())" })
                    @Html.ValidationMessageFor(model => model.VendorsID, "", new { @class = "error mt-2 text-danger" })
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title" style="color:darkcyan">Delivery Details</h4>
                            <hr />
                            <div class="form-group">
                                @*@Html.DropDownList("OrganisationId", (IEnumerable<SelectListItem>)ViewData["DeliveryAddress"], new { @class = "form-control", placeholder = "Delivery address", style = "height:100px" })
                            @Html.ValidationMessageFor(model => model.OrganisationId, "", new { @class = "error mt-2 text-danger" })*@
                                @*@Html.DropDownList("LocationId", (IEnumerable<SelectListItem>)ViewData["DeliveryAddress"], new { @class = "form-control", placeholder = "Delivery address", style = "height:100px" })
                            @Html.ValidationMessageFor(model => model.LocationId, "", new { @class = "error mt-2 text-danger" })*@
                                @Html.TextAreaFor(model => model.DeliveryAddress, new { id = "DeliveryAddress", @class = "form-control", placeholder = "Delivery address", style = "height:100px" })
                                @Html.ValidationMessageFor(model => model.DeliveryAddress, "", new { @class = "error mt-2 text-danger" })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title" style="color:darkcyan">Supplier Details</h4>
                            <hr />
                            <div class="form-group">
                                @Html.TextAreaFor(model => model.SupplierAddress, new { id = "SupplierAddress", @class = "form-control", placeholder = "Supplier address", style = "height:100px" })
                                @Html.ValidationMessageFor(model => model.SupplierAddress, "", new { @class = "error mt-2 text-danger" })
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <br />
            </div>
            <div class="row">
                <div class="col-md-2 mb-1">
                    @Html.Label("Amendment Number")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(model => model.Amendment, new { @class = "form-control", Value = "0", @readonly = "readonly" })
                    @Html.ValidationMessageFor(model => model.Amendment, "", new { @class = "error mt-2 text-danger" })
                </div>
                <br />
                <br />
                <div class="col-md-2 mb-1">
                    @Html.Label("Indent Number")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(model => model.IndentNumber, new { @class = "form-control form-control-sm" })
                    @Html.ValidationMessageFor(model => model.IndentNumber, "", new { @class = "error mt-2 text-danger" })
                </div>
            </div>
            <br />
            <div class="row">
                @*<br />
            <br />
            <div id="AddMultipleDiv" class="col-6 mb-1">
                <fieldset>
                    <div class="row">
                        <div class="col-lg-7">
                            <label>Signature</label>
                            <input type="file" name="Signature" id="fileupload" class="file-drop-zone" required>
                            <span id="sfileupload" class="text-danger"></span>
                        </div>
                    </div>
                </fieldset>
            </div>
            <br />
            <br />
            <br />*@
                <div class="col-md-2 mb-1">
                    @Html.Label("Remarks")
                    <span style="color:red">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(model => model.Remarks, new { @class = "form-control form-control-sm" })
                    @Html.ValidationMessageFor(model => model.Remarks, "", new { @class = "error mt-2 text-danger" })
                </div>
            </div>
            <br />
            <br />
            <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <div class="form-group">
                            <div class="row">
                                <div class="table-sorter-wrapper col-lg-12 table-responsive">
                                    <table class="table table-striped" id="submissionTable">
                                        <thead>
                                            <tr>
                                                <th class="sortStyle">
                                                    Item Code
                                                    <i class="fa fa-angle-down"></i>
                                                </th>
                                                <th class="sortStyle">
                                                    Item Description
                                                    <i class="fa fa-angle-down"></i>
                                                </th>
                                                <th class="sortStyle">
                                                    Quantity
                                                    <i class="fa fa-angle-down"></i>
                                                </th>
                                                <th class="sortStyle">
                                                    Units
                                                    <i class="fa fa-angle-down"></i>
                                                </th>
                                                <th class="sortStyle">
                                                    Price
                                                    <i class="fa fa-angle-down"></i>
                                                </th>
                                                <th class="sortStyle">
                                                    Tax
                                                    <i class="fa fa-angle-down"></i>
                                                </th>
                                                <th class="sortStyle">
                                                    Total before tax
                                                    <i class="fa fa-angle-down"></i>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr id="tablerow">
                                                <td>
                                                    @Html.DropDownList("Item_ID", (IEnumerable<SelectListItem>)ViewData["itemListForDD"], "--Select Item--", new { @class = "form-control", style = "height:30px;width:100px;" })
                                                </td>
                                                <td>
                                                    @Html.TextBox("ItemDescription", "", new { @class = "form-control", style = "height:30px;width:200px;" })
                                                </td>
                                                <td>
                                                    @Html.TextBoxFor(model => model.ItemQuantity, new { @class = "form-control", style = "height:30px;width:100px;", value = "0", onkeypress = "return isNumberKey(event)" })
                                                </td>
                                                <td>
                                                    @Html.TextBox("ItemUnit", "", new { @class = "form-control", style = "height:30px;width:100px;" })
                                                </td>
                                                <td>
                                                    @Html.TextBox("ItemPrice", "", new { @class = "form-control", style = "height:30px;width:100px;" })
                                                </td>
                                                <td>
                                                    @Html.TextBox("ItemTax", "", new { @class = "form-control", style = "height:30px;width:80px;" })
                                                </td>
                                                <td>
                                                    @Html.TextBoxFor(model => model.TotalItemCost, "", new { @class = "form-control", id = "ItemTotalPrice", style = "height:30px;width:200px;" })
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-primary" onclick="removeTr(0);">Delete</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <button type="button" class="btn btn-info shadow" id="AddItem">
                                    + Add Item
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <hr />
            <br />
            <div class="col-md-12 grid-margin stretch-card">
                <div class="col-md-6 grid-margin stretch-card">
                    <div class="card h-75">
                        <div class="card-body">
                            <h4 class="card-title" style="color:darkcyan">Attach Signature</h4>
                            <hr />
                            @*<input type="file" name="img[]" class="file-upload-default" style="visibility:hidden;position:absolute;">
                        <div class="input-group col-xs-12">
                            <input type="text" class="form-control file-upload-info" disabled placeholder="Upload Signature" />
                            <span class="input-group-append">
                                <button type="button" class="file-upload-browse btn btn-primary">Attach</button>
                            </span>
                        </div>*@
                            <div class="form-group">
                                <input type="file" id="file" name="Signature"
                                       onchange="return fileValidation()" />
                                <!-- Image preview -->
                                <span style="color:green">@ViewBag.Message</span>
                                <br />
                                <br />
                                <center>
                                    <div id="imagePreview"></div>
                                </center>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <br />
                <div class="col-md-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <hr />
                            <div class="form-group">
                                <div class="row">
                                    <label>Total (before tax): </label>
                                    <input class="form-control" id="TotalBeforeTax" name="TotalItemCost" />
                                </div>
                                <div class="row">
                                    <label>Total tax: </label>
                                    @*<input class="form-control" id="TotalTax" name="Tax" />*@
                                    <input class="form-control" id="TotalTax" name="TotalTax" />
                                </div>
                                <div class="row">
                                    <label>Total (after tax):</label>
                                    @*<input class="form-control" id="TotalAfterTax" />*@
                                    <input class="form-control" id="TotalAfterTax" name="TotalAfterTax" />
                                </div>
                                <div class="row">
                                    <label><b>Grand Total:</b></label>
                                    <input class="form-control" id="GrandTotal" name="GrandTotal" />
                                </div>
                                <div class="row">
                                    <label>Advanced To Pay:</label>
                                    <input class="form-control" id="AdvancedPayment" name="AdvancedPayment" onkeypress="return isNumberKey(event)" />
                                </div>
                            </div>
                            <br />
                            @*<button type="submit" id="btn_SaveDraft" class="btn btn-primary mr-2" style="background: linear-gradient(85deg, #392c70, #6a005b);" formaction="SaveDraft">Save Draft</button>
                            <button type="submit" class="btn btn-primary mr-2" style="background: linear-gradient(85deg, #392c70, #6a005b);" formaction="AddPurchaseOrder">Save</button>
                            @Html.ActionLink("Back to List", "Index", new { @class = "font-weight-light" })*@
                        </div>
                    </div>
                </div>
                <br />
                <br />
            </div>
            <!--<div class="row">
        <div class="col-md-2">
            @Html.Label("Tittle")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.Tittle, new { @class = "form-control form-control-sm", placeholder = "Purchase Order For Vangi Foods", type = "text" })
            @Html.ValidationMessageFor(model => model.Tittle, "", new { @class = "error mt-2 text-danger" })
        </div>
        <br />
        <div class="col-md-2">
            @Html.Label("PO Number")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.PONumber, new { @class = "form-control form-control-sm", placeholder = "P00001", type = "text" })
            @Html.ValidationMessageFor(model => model.PONumber, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("PO Document Date")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4 form-group">
            @Html.TextBoxFor(model => model.PODate, new { @class = "form-control", type = "date" })
            @Html.ValidationMessageFor(model => model.PODate, "", new { @class = "error mt-2 text-danger" })
        </div>
        <div class="col-md-2">
            @Html.Label("Document Number")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.DocumentNumber, new { @class = "form-control form-control-sm", placeholder = "D00001", type = "text" })
            @Html.ValidationMessageFor(model => model.DocumentNumber, "", new { @class = "error mt-2 text-danger" })
        </div>
        <div class="col-md-2">
            @Html.Label("Delivery Date")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4 form-group">
            @Html.TextBoxFor(model => model.DeliveryDate, new { @class = "form-control", type = "date" })
            @Html.ValidationMessageFor(model => model.DeliveryDate, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("Venders ID")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.VendorsID, new { @class = "form-control form-control-sm", placeholder = "1", type = "text" })
            @Html.ValidationMessageFor(model => model.VendorsID, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("TermsAnd Condition ID")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.TermsAndConditionID, new { @class = "form-control form-control-sm", placeholder = "1", type = "text" })
            @Html.ValidationMessageFor(model => model.TermsAndConditionID, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("Purchase Order Status")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.PurchaseOrderStatus, new { @class = "form-control form-control-sm", placeholder = "Pending", type = "text" })
            @Html.ValidationMessageFor(model => model.PurchaseOrderStatus, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-6 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title" style="color:darkcyan">Delivery Details</h4>
                    <hr />
                    <div class="form-group">
                        @Html.TextAreaFor(model => model.DeliveryAddress, new { @class = "form-control", placeholder = "Delivery address", style = "height:100px" })
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 grid-margin stretch-card">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title" style="color:darkcyan">Supplier Details</h4>
                    <hr />
                    <div class="form-group">
                        @Html.TextAreaFor(model => model.SupplierAddress, new { @class = "form-control", placeholder = "Supplier address", style = "height:100px" })-->
            @*<textarea id="SupplierAddress" name="SupplierAddress" class="form-control" style="height:100px;"></textarea>*@
            <!--</div>
                </div>
            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("WorkOrder No")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.WorkOrderNo, new { @class = "form-control form-control-sm" })
            @Html.ValidationMessageFor(model => model.WorkOrderNo, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("Signature")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.Signature, new { @class = "form-control form-control-sm" })
            @Html.ValidationMessageFor(model => model.Signature, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("Indent Number")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.IndentNumber, new { @class = "form-control form-control-sm" })
            @Html.ValidationMessageFor(model => model.IndentNumber, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("Remarks")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.Remarks, new { @class = "form-control form-control-sm" })
            @Html.ValidationMessageFor(model => model.Remarks, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-2">
            @Html.Label("Created Date")
            <span style="color:red">*</span>
        </div>
        <div class="col-md-4">
            @Html.TextBoxFor(model => model.CreatedDate, new { @class = "form-control form-control-sm" })
            @Html.ValidationMessageFor(model => model.CreatedDate, "", new { @class = "error mt-2 text-danger" })
        </div>
    </div>
    <br />
    <br />
    <div class="row">
        <div class="col-md-1">
            @Html.Label("Created By")
            <span style="color:red">*</span>
        </div>-->
            @*<div class="col-md-2">
            @Html.Label("Is Black Listed")
        </div>
        <div class="col-md-2">
            <input type="checkbox" name="IsBlackListed" id="IsBlackListed" class="form-check-input" value="true" />
            <input name="IsBlackListed" type="hidden" checked value="false" />
        </div>*@
            <!--</div>-->
            <br />
            <button type="submit" class="btn btn-primary mr-2" style="background: linear-gradient(85deg, #392c70, #6a005b);">Submit</button>
            <a href="@Url.Action("Index","PurchaseOrder")" class="btn btn-primary" style="background: linear-gradient(85deg, #392c70, #6a005b);">
                Back To List
            </a>
        </div>
    </div>
}
@Html.Raw(TempData["Success"])
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}